(self.webpackChunkvk=self.webpackChunkvk||[]).push([[8833],{85677:function(n,e,t){"use strict";t.d(e,{UnauthorizedActionModal:function(){return s}});var o=t(62641),a=t(85703),i=t(81294),r=t(52822),c=t(33748),l=t(40684),u=t(4726);function s(n){void 0===n&&(n={});var e,t=n.loginUrl||"/login",s=n.joinUrl||"/join",_=n.showOpenInApp,d=n.openInAppUrl,g={more:{title:(0,o.getLang)("mobile_unauthorized_action_more_title"),description:(0,o.getLang)("mobile_unauthorized_action_more_description")},like:{title:(0,o.getLang)("mobile_unauthorized_action_like_title"),description:(0,o.getLang)("mobile_unauthorized_action_like_description")},share:{title:(0,o.getLang)("mobile_unauthorized_action_share_title"),description:(0,o.getLang)("mobile_unauthorized_action_share_description")}};e=n.title||n.description?{title:n.title,description:n.description}:g[n.type];var p,v=n.iconType,f=n.iconUrl;if(v||(v="like"===n.type?"like":"share"===n.type?"share":"vk"),f)p=(0,u.Avatar)({size:72,src:f,borderRadius:"full"});else switch(v){case"vk":p=(0,c.Icon56LogoVk)();break;case"like":p=(0,c.Icon56LikeOutline)();break;case"share":p=(0,c.Icon56ShareOutline)();break;case"photo":p=(0,c.Icon56GalleryOutline)();break;case"video":p=(0,c.Icon56VideoOutline)();break;case"music":p=(0,c.Icon56MusicOutline)();break;case"add_user":p=(0,c.Icon56UserAddOutline)();break;case"community":p=(0,r.default)({icon:(0,l.getUsers3Outline56Icon)()});break;case"message":p=(0,c.Icon56MessageOutline)()}var m="modal_"+n.type||0;n.isCTA&&(m="cta");var h,k=n.isUnauthorizedFeed,w=null,y=null;if(n.onLoginClick?w=n.onLoginClick:k&&(w="UnauthorizedFeed.onActionClick(event)"),n.onJoinClick?y=n.onJoinClick:k&&(w="UnauthorizedFeed.onActionClick(event)"),_){var B=""+(0,o.getLang)("unauthorized_box_sign_in_or_sign_up");B=(0,o.langTag)('<a class="UnauthorizedActionModal__signInTextLink" href="'+t+'">',"</a>",B,"link_sign_in"),B=(0,o.langTag)('<a class="UnauthorizedActionModal__signUpTextLink" href="'+s+'">',"</a>",B,"link_sign_up"),h={inner:[(0,i.default)({inner:[(0,o.getLang)("mobile_open_in_native_app_float_btn")],class:"UnauthorizedActionModal__openInAppButton",url:d,use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),{inner:[Wd.wrap(B)],class:"UnauthorizedActionModal__openInAppFooterText",tag:"div"}],class:"UnauthorizedActionModal__openInAppFooter",tag:"div"}}else h=(0,a.BtnStack)({inner:[(0,i.default)({inner:[(0,o.getLang)("mobile_unauthorized_login")],url:t,onClick:w,attrs:{"data-type":"login","data-from":""+m},use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),(0,i.default)({inner:[(0,o.getLang)("mobile_unauthorized_join")],url:s,onClick:y,attrs:{"data-type":"join","data-from":""+m},use_native_onclick:!0,stretch:!0,theme:"positive",size:"large"})],mode:"vertical"});return{inner:[{inner:[{inner:[p],class:"UnauthorizedActionModal__icon",tag:"div"},{inner:[e.title],class:"UnauthorizedActionModal__title",tag:"div"},{inner:[e.description],class:"UnauthorizedActionModal__description",tag:"div"},h],class:"UnauthorizedActionModal__in",tag:"div"}],class:(0,o.classNames)("UnauthorizedActionModal","UnauthorizedActionModal--"+n.type,n.className),tag:"div"}}},64119:function(n,e,t){"use strict";var o,a,i;!function(n){n.COOKIES="cookies",n.BAD_BROWSER="bad_browser",n.UNAUTH="unauth"}(o||(o={})),function(n){n.SIGN_IN="sign_in",n.SIGN_UP="sign_up",n.OPEN_IN_APP="open_in_app",n.AJAX_ACTION="ajax_action"}(a||(a={})),function(n){n.REGULAR="regular",n.GREEN="green"}(i||(i={}));var r=t(74093),c=t(40517),l=t(81294),u=t(62641),s=t(52822),_=t(33748),d=t(45854),g=t(20267),p=t(10443);var v=t(39871);var f=t(71437),m=t(97349);function h(n,e,t,o){var a=n.querySelector('.Btn[data-action="'+e+'"], .PageBottomBanner__actionLink[data-action="'+e+'"]');a&&a.addEventListener("click",(function(n){t&&(n.preventDefault(),n.stopPropagation()),o(n,n.target)}))}function k(n){var e=(0,f.$)(".PageBottomBanner--"+n),t=(0,f.$)('[data-spacer-for=".PageBottomBanner--'+n+'"]');null==e||e.remove(),null==t||t.remove()}function w(n){setTimeout((function(){return window.nav.go(n)}),110)}function y(n){r.marketingTransitionItemStat.logEvent(c.MarketingTransitionItemCampaignType.UNAUTH_BOTTOM_BANNER,n,"",window.location.href)}function B(n){if(!(0,f.$)(".CookiePolicy")){var e=v.default.elem(function(n){var e=n.type,t=n.iconType||"vk_logo",o=null==n.canClose||n.canClose,a=n.header,i=n.text,r=n.actionsLayout,c=n.actions||[],v=null;Array.isArray(c)&&c.length>0&&(v={inner:[c.map((n=>{var e=n.mode,t=n.type,o=n.label,a=n.url,i="regular";switch(e){case"primary":i="regular";break;case"outline":i="outline";break;case"overlay_primary":i="overlayPrimary";break;case"overlay_secondary":i="overlaySecondary";break;case"overlay_outline":i="outlineMono"}return"link"===e?{inner:[{inner:[o],class:"PageBottomBanner__actionLink",href:a,"data-action":t,tag:"a"}],class:(0,u.classNames)("PageBottomBanner__action","PageBottomBanner__action--"+t),tag:"div"}:{inner:[(0,l.default)({inner:[o],url:a,size:"small",theme:i,attrs:{"data-action":t}})],class:(0,u.classNames)("PageBottomBanner__action","PageBottomBanner__action--"+t),tag:"div"}}))],class:(0,u.classNames)("PageBottomBanner__actions",{"PageBottomBanner__actions--vertical":"vertical"===r}),tag:"div"});var f=null;switch(t){case"cookie":f=(0,g.getBannerCookie36Icon)();break;case"soccer":f=(0,p.getBannerSoccer36Icon)();break;default:f=(0,d.getVkLogo36Icon)()}return{inner:[{inner:[o?{inner:[(0,_.Icon24Dismiss)()],class:"PageBottomBanner__close","aria-label":(0,u.getLang)("mobile_close"),tag:"button"}:null,{inner:[{inner:[(0,s.default)({icon:f})],class:(0,u.classNames)("PageBottomBanner__icon","PageBottomBanner__icon--"+t),tag:"div"},{inner:[a?{inner:[Wd.wrap(a)],class:"PageBottomBanner__header",tag:"div"}:null,i?{inner:[Wd.wrap(i)],class:"PageBottomBanner__text",tag:"div"}:null],class:"PageBottomBanner__content",tag:"div"}],class:"PageBottomBanner__main",tag:"div"},v],class:"PageBottomBanner__in",tag:"div"}],class:(0,u.classNames)("PageBottomBanner","PageBottomBanner--"+e),tag:"div"}}({type:n.type,iconType:n.icon_type,canClose:n.can_close,header:n.header,text:n.text,actionsLayout:n.actions_layout,actions:n.actions})),t=e.querySelector(".PageBottomBanner__close");null==t||t.addEventListener("click",(function(e){e.preventDefault(),k(n.type),y(c.MarketingTransitionItemEventType.CLOSE),window.ajax.post("/?act=hide_page_bottom_banner",{_ajax:1,banner_type:o.UNAUTH,location:window.location.href})})),h(e,a.SIGN_IN,!0,(function(e,t){y(c.MarketingTransitionItemEventType.CLICK_SIGN_IN),k(n.type),w(t)})),h(e,a.SIGN_UP,!0,(function(e,t){y(c.MarketingTransitionItemEventType.CLICK_SIGN_UP),k(n.type),w(t)})),h(e,a.OPEN_IN_APP,!0,(function(e,t){y(c.MarketingTransitionItemEventType.CLICK_OPEN_IN_APP),k(n.type);var o=t.getAttribute("href");if(o){var a=(0,m.getOpenInAppMyTrackerUrl)(o);setTimeout((function(){return window.nav.go(a)}),110)}})),document.body.appendChild(e);var i,r,B,I,T=v.default.elem((i={bannerType:n.type},r=".PageBottomBanner--"+i.bannerType,B=document.querySelector(r),I=B?B.clientHeight:0,{"data-spacer-for":r,style:v.default.prepareStyle({height:I+"px"}),tag:"div"}));document.body.insertBefore(T,e),window.cur.destroy.push((function(){k(n.type)}))}}var I={initBanner:function(n){if(n.type===o.UNAUTH)B(n)}};window.PageBottomBanners=I},97349:function(n,e,t){"use strict";t.d(e,{Unauthorized:function(){return v},getOpenInAppMyTrackerUrl:function(){return f}});var o=t(85677),a=t(9223),i=t(39871),r=t(40517),c=t(74093),l=t(71437),u=t(76567);function s(n,e){if(_(),n){var t=function(e){c.marketingTransitionItemStat.logEvent(r.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,e,n.unauth_action_box.action,window.location.href)},u=(0,o.UnauthorizedActionModal)({type:n.unauth_action_box.action,iconType:n.unauth_action_box.icon_type,iconUrl:n.unauth_action_box.icon_url,title:n.unauth_action_box.header,description:n.unauth_action_box.text,loginUrl:n.sign_in_url,joinUrl:n.sign_up_url,showOpenInApp:n.show_open_in_app,openInAppUrl:n.open_in_app_url}),s=(0,a.default)({body:u}),d=!1,g=function(){d||e&&e(),t(r.MarketingTransitionItemEventType.CLOSE)};(0,a.open)(i.default.elem(s),!0,"",{onClose:function(){g()},onOverlayClick:function(){setTimeout((function(){return g()}),500)}});var p=(0,l.$)(".UnauthorizedActionModal__openInAppButton"),v=(0,l.$)(".UnauthorizedActionModal__signInTextLink"),m=(0,l.$)(".UnauthorizedActionModal__signUpTextLink"),h=(0,l.$)('.UnauthorizedActionModal .Btn[data-type="login"]'),k=(0,l.$)('.UnauthorizedActionModal .Btn[data-type="join"]'),w=function(n){window.ModalMenu.close(n)},y=function(n,e){var o=n.target;d=!0,t(e),w(o),n.preventDefault(),n.stopPropagation(),setTimeout((function(){return window.nav.go(o)}),110)};[h,v].forEach((function(n){null==n||n.addEventListener("click",(function(n){y(n,r.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),[k,m].forEach((function(n){null==n||n.addEventListener("click",(function(n){y(n,r.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),null==p||p.addEventListener("click",(function(n){var e=n.target;d=!0,t(r.MarketingTransitionItemEventType.CLICK_OPEN_IN_APP),w(e),n.preventDefault(),n.stopPropagation();var o=e.getAttribute("href");if(o){var a=f(o);setTimeout((function(){return window.nav.go(a)}),110)}})),t(r.MarketingTransitionItemEventType.OPEN)}}function _(){window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,write_ab:1})}var d,g=0,p=!1;var v={onActionClick:function(n,e,t){var o;(null===(o=window.UnauthorizedFeed)||void 0===o?void 0:o.isActive)?window.UnauthorizedFeed.onAction(n,e):window.vk.id||(null==n||n.preventDefault(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:e,object:t,to:window.location.href.replace(window.location.origin,"")},{onDone:function(n){n.unauth_action_box&&s(n)}}))},onMoreBoxActionClick:function(n,e){n&&(e&&c.marketingTransitionItemStat.logEvent(r.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,e,r.MarketingTransitionItemSourceType.MORE,window.location.href),n.preventDefault(),n.stopPropagation(),setTimeout((function(){return window.nav.go(n.target)}),110))},initScrollMoreBox:function(n){var e,t=function(){p=!1,window.removeEventListener("scroll",d)};t(),g=Date.now(),d=function(){p||Date.now()-g<2e3||(window.cur.unauthScrollMoreBox||window.pageYOffset>=2*window.innerHeight&&(p=!0,s(n)))},window.addEventListener("scroll",d),null===(e=window.cur.destroy)||void 0===e||e.push((function(){return t()}))},showMoreBox:function(n,e,t,o){n&&n.preventDefault(),_(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:"more",owner_id:e,source:t,to:window.location.href.replace(window.location.origin,"")},{loader:!0,onDone:function(n){n.unauth_action_box&&s(n,o)}})},writeUnauhActionBoxABGroup:_};function f(n){var e=n.includes("?")?"&":"?";return""+n+e+"unauth_id="+(0,u.getCookie)("remixstid")+"&target_url="+encodeURIComponent(window.location.href)}}},function(n){"use strict";n.O(0,[4578,1777,4736,5456,5790,3898,5411,6855,6199,490,410,6444,8592,7219,6429],(function(){return e=64119,n(n.s=e);var e}));n.O()}]);