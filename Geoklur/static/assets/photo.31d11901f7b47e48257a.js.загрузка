(self.webpackChunkvk=self.webpackChunkvk||[]).push([[7017],{85677:function(e,t,n){"use strict";n.d(t,{UnauthorizedActionModal:function(){return l}});var i=n(62641),o=n(85703),r=n(81294),a=n(52822),s=n(33748),u=n(40684),c=n(4726);function l(e){void 0===e&&(e={});var t,n=e.loginUrl||"/login",l=e.joinUrl||"/join",d=e.showOpenInApp,_=e.openInAppUrl,h={more:{title:(0,i.getLang)("mobile_unauthorized_action_more_title"),description:(0,i.getLang)("mobile_unauthorized_action_more_description")},like:{title:(0,i.getLang)("mobile_unauthorized_action_like_title"),description:(0,i.getLang)("mobile_unauthorized_action_like_description")},share:{title:(0,i.getLang)("mobile_unauthorized_action_share_title"),description:(0,i.getLang)("mobile_unauthorized_action_share_description")}};t=e.title||e.description?{title:e.title,description:e.description}:h[e.type];var v,g=e.iconType,f=e.iconUrl;if(g||(g="like"===e.type?"like":"share"===e.type?"share":"vk"),f)v=(0,c.Avatar)({size:72,src:f,borderRadius:"full"});else switch(g){case"vk":v=(0,s.Icon56LogoVk)();break;case"like":v=(0,s.Icon56LikeOutline)();break;case"share":v=(0,s.Icon56ShareOutline)();break;case"photo":v=(0,s.Icon56GalleryOutline)();break;case"video":v=(0,s.Icon56VideoOutline)();break;case"music":v=(0,s.Icon56MusicOutline)();break;case"add_user":v=(0,s.Icon56UserAddOutline)();break;case"community":v=(0,a.default)({icon:(0,u.getUsers3Outline56Icon)()});break;case"message":v=(0,s.Icon56MessageOutline)()}var p="modal_"+e.type||0;e.isCTA&&(p="cta");var m,w=e.isUnauthorizedFeed,b=null,x=null;if(e.onLoginClick?b=e.onLoginClick:w&&(b="UnauthorizedFeed.onActionClick(event)"),e.onJoinClick?x=e.onJoinClick:w&&(b="UnauthorizedFeed.onActionClick(event)"),d){var I=""+(0,i.getLang)("unauthorized_box_sign_in_or_sign_up");I=(0,i.langTag)('<a class="UnauthorizedActionModal__signInTextLink" href="'+n+'">',"</a>",I,"link_sign_in"),I=(0,i.langTag)('<a class="UnauthorizedActionModal__signUpTextLink" href="'+l+'">',"</a>",I,"link_sign_up"),m={inner:[(0,r.default)({inner:[(0,i.getLang)("mobile_open_in_native_app_float_btn")],class:"UnauthorizedActionModal__openInAppButton",url:_,use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),{inner:[Wd.wrap(I)],class:"UnauthorizedActionModal__openInAppFooterText",tag:"div"}],class:"UnauthorizedActionModal__openInAppFooter",tag:"div"}}else m=(0,o.BtnStack)({inner:[(0,r.default)({inner:[(0,i.getLang)("mobile_unauthorized_login")],url:n,onClick:b,attrs:{"data-type":"login","data-from":""+p},use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),(0,r.default)({inner:[(0,i.getLang)("mobile_unauthorized_join")],url:l,onClick:x,attrs:{"data-type":"join","data-from":""+p},use_native_onclick:!0,stretch:!0,theme:"positive",size:"large"})],mode:"vertical"});return{inner:[{inner:[{inner:[v],class:"UnauthorizedActionModal__icon",tag:"div"},{inner:[t.title],class:"UnauthorizedActionModal__title",tag:"div"},{inner:[t.description],class:"UnauthorizedActionModal__description",tag:"div"},m],class:"UnauthorizedActionModal__in",tag:"div"}],class:(0,i.classNames)("UnauthorizedActionModal","UnauthorizedActionModal--"+e.type,e.className),tag:"div"}}},29476:function(e,t,n){"use strict";var i=n(79573),o=n(20848),r=n(65256),a=n(97349),s=n(59866),u=n(7846),c=n(79957),l=n(12449),d=!1,_=!1;var h=n(16144),v=n(45582),g=n(19331),f=n(64471),p=n(24661),m=n(44167),w=n(64712),b=n(89414),x=n(62641),I=n(75280),k=n(11397),y=n(56769),A=n(91896),M=n(82917),L=n(55670),E=n(199),T=n(47032),P=n(90708),U=n(57141),C=n(95036),z=n(66325),O=n(98884),j=n(40906),S=n(48743),D=function(e){var t=(0,I.useAdaptivity)().viewWidth,n=void 0===t?I.ViewWidth.MOBILE:t,r=(0,i.__read)((0,y.useState)(!0),2),a=r[0],s=r[1],c=(0,i.__read)((0,y.useState)(!0),2),l=c[0],d=c[1],_=(0,i.__read)((0,y.useState)([]),2),h=_[0],v=_[1],g=(0,i.__read)((0,y.useState)(!1),2),f=g[0],p=g[1],m=(0,i.__read)((0,y.useState)(null),2),w=m[0],b=m[1],k=(0,y.useRef)(null);(0,y.useEffect)((function(){(0,u.fetchAlbumUploadAdapter)(),(0,C.api)("photos.getAlbums",{owner_id:e.owner_id,need_covers:1,photo_sizes:1}).then((function(t){S.Ranges.isUserPeer(e.owner_id)?p(!0):p(e.can_create_album),v(t.items),d(!1)}))}),[]);var M=n<=I.ViewWidth.MOBILE,D="/photos"+e.owner_id+"?act=select_album";return(0,A.jsx)(I.ModalRoot,(0,i.__assign)({activeModal:a?"modal":null},{children:(0,A.jsxs)(I.ModalPage,(0,i.__assign)({id:"modal",onClose:function(){return s(!1)},onClosed:e.destroy,dynamicContentHeight:!0,header:(0,A.jsx)(I.ModalPageHeader,(0,i.__assign)({separator:null===h,before:M&&(0,A.jsx)(I.PanelHeaderClose,{onClick:function(){return s(!1)},"aria-label":(0,x.getLang)("mobile_close")},void 0)},{children:(0,x.getLang)("mobile_photos_choose_album_modal_title")}),void 0)},{children:[null===h?(0,A.jsx)(I.Separator,{},void 0):null,(0,A.jsxs)("div",(0,i.__assign)({className:"AddPhotoModal"},{children:[h.length||l?null:(0,A.jsx)(I.Placeholder,(0,i.__assign)({action:f&&(0,A.jsx)(I.Button,(0,i.__assign)({mode:"tertiary",href:D},{children:(0,x.getLang)("mobile_photos_choose_album_modal_create_album")}),void 0)},{children:(0,x.getLang)("mobile_photos_choose_album_modal_empty_text")}),void 0),!h.length&&l?(0,A.jsx)(I.PanelSpinner,{},void 0):null,h.length?(0,A.jsxs)(A.Fragment,{children:[f&&(0,A.jsx)(I.Div,{children:(0,A.jsx)(I.Button,(0,i.__assign)({href:D,size:"l",stretched:!0,mode:"secondary",before:(0,A.jsx)(L.default,{},void 0)},{children:(0,x.getLang)("mobile_photos_choose_album_modal_create_album")}),void 0)},void 0),(0,A.jsx)("input",{multiple:!0,accept:"image/jpeg,image/png,image/gif,image/heic,image/heif,image/webp",type:"file",hidden:!0,ref:function(e){return k.current=e},onChange:function(t){if((null==h?void 0:h.find((function(e){return e.id===w})))&&t.target.files){var n=(0,P.createAdapterContext)(e.owner_id||0,w||0),o=(0,P.setupUploadHandlers)(n),r=!0;(0,u.fetchAlbumUploadAdapter)().then((function(e){var o,a=e.startUpload;return null===(o=window.cur.destroy)||void 0===o||o.push((function(){r=!1})),a(n,(0,i.__spreadArray)([],(0,i.__read)(t.target.files||[]),!1)).then((function(e){var t=e.success,n=e.failed;0!==n&&(0,P.showUploadFinishSnackbar)(t,n)}))})).catch((function(e){throw r=!1,(0,U.init)({text:(0,x.getLang)("mobile_unknown_error"),type:U.SNACKBAR_TYPE_ERROR}),e})).finally((function(){o(),r&&window.nav.reload()})),e.destroy()}}},void 0),(0,A.jsx)("div",(0,i.__assign)({className:"AddPhotoModal__items"},{children:h.map((function(e){var t,n=e.sizes&&e.thumb_id?(0,z.getPhotoSize)(e.sizes,180*window.devicePixelRatio):null,r="only_me"===(null===(t=e.privacy_view)||void 0===t?void 0:t.category);return(0,A.jsx)(I.HorizontalCell,(0,i.__assign)({className:"AddPhotoModal__album",size:"l",header:(0,A.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,O.emojiToHTML)((0,j.clean)(e.title),!0)}},void 0),subtitle:(0,o.langNumeric)(e.size,(0,x.getLang)("mobile_albums_x_photos","raw")),href:"/album"+e.owner_id+"_"+e.id,onClick:function(t){(0,o.checkEvent)(t.nativeEvent)||(t.preventDefault(),(0,o.cancelEvent)(t.nativeEvent),function(e){k.current&&(b(e.id),k.current.click())}(e))}},{children:(0,A.jsxs)("div",(0,i.__assign)({className:(0,x.classNames)("AddPhotoModal__thumb",{"AddPhotoModal__thumb--empty":!n}),style:n?{backgroundImage:"url("+(null==n?void 0:n.url)+")"}:void 0},{children:[!n&&(0,A.jsx)("div",(0,i.__assign)({className:"AddPhotoModal__icon"},{children:(0,A.jsx)(E.default,{},void 0)}),void 0),r&&(0,A.jsx)("div",(0,i.__assign)({className:"AddPhotoModal__albumBadge"},{children:(0,A.jsx)(T.default,{},void 0)}),void 0)]}),void 0)}),e.id)}))}),void 0)]},void 0):null]}),void 0)]}),void 0)}),void 0)},$=function(e){return(0,A.jsx)(M.StandaloneModalRoot,{modal:(0,A.jsx)(D,(0,i.__assign)({},e),void 0)},void 0)},N=n(95574),B=n(60201),F=n(63848);function H(e,t,n){var i,o;void 0===t&&(t=(null===(i=window.vk)||void 0===i?void 0:i.id)||0),void 0===n&&(n=!1);var r=(0,B.showComponent)((function(){return(0,y.createElement)($,{destroy:(0,F.withFocusBack)(e,(function(){return r()})),owner_id:t,can_create_album:n})}));null===(o=window.cur.destroy)||void 0===o||o.push(r)}window.AddPhotoModal={open:H},(0,N.tq)().setInteractiveHandler("Photos/open_add_photo_modal",(function(e){var t,n=e.payload,i=n.target,o=n.dataAttrs;i&&H(i,Number(null==o?void 0:o.ownerId)||(null===(t=window.vk)||void 0===t?void 0:t.id)||0,"1"===(null==o?void 0:o.canCreateAlbum))}));var V={openInLayer:function(e,t,n,b,y){if(void 0===y&&(y={}),(0,o.checkEvent)(t))return!0;var A=y.isAlbumPage,M=y.key,L=y.forceUnauth,E=y.from,T=void 0!==E&&E,P=y.community;if(n.startsWith("external"))return(0,p.setZUrl)({is_back_navigation:!0}),!1;if(window.cur.isNavigationConfirmEnabled)return!1;if(r.SAKIntegration.isIntegrated)return r.SAKIntegration.sendMessage("photo",{id:n+"_"+(M||"")}),!1;if(t&&t.isTrusted&&!L&&!window.vk.id&&(0,g.partConfigEnabled)("unauthorized_media_layer_box")&&document.querySelector(".PageBottomBanner--unauth"))return y.forceUnauth=!0,a.Unauthorized.showMoreBox(null,0,s.UnauthorizedSourceType.PHOTO,(function(){window.photo.openInLayer(e,t,n,b,y)})),!1;var U=b||"",C=(0,i.__read)(U.split("/"),2),z=C[0],O="rev"===C[1];delete window.nav.getQuery().z,(0,m.setListId)(z),(0,m.setFromParam)(T||""),(0,m.setCommunityParam)(P),(0,m.setReverseOrder)(O);var j=(0,f.getListFromDOM)(e);(0,h.insertPhotos)(Object.values(j));var S={};A&&(S=Object.entries(j).reduce((function(e,t){var n,o=(0,i.__read)(t,2),r=o[0],a=o[1];return(0,i.__assign)((0,i.__assign)({},e),((n={})[r]=a.id,n))}),{}),(0,w.insertListItems)({list_id:z,items:S}));var D,$=A&&S.length?(0,k.transformIndexObject)(S):w.$lists.getState()[z],N=$?$.indexOf(n):-1;if(-1===N){var B={id:n,original_src:!0,need_reload:1};(0,h.insertPhotos)([B]),(0,w.setListItems)({list_id:z,items:[]}),(0,m.setTargetPhotoID)(n)}else(0,m.setIndex)(N);return(void 0===D&&(D="photo"),d?Promise.reject():_?Promise.resolve():(window.clog("MediaView loading started"),(0,u.fetchMediaView)().then((function(){_=!0,(0,c.statlogsValueEvent)(l.STATLOG_MEDIAVIEW_EVENT,"init",D),window.clog("MediaView loading done")})).catch((function(e){throw d=!0,window.clog("MediaView loading failed"),e})))).then((function(){return(0,p.toggleLayer)({state:!0})})).catch((function(e){(0,v.logError)(e,{environment:"mobile_photo"}),I.Snackbar.init({text:(0,x.getLang)("global_error")})})),(0,o.cancelEvent)(t),!1},openInPhotoview:function(e,t,n,r,a){if((0,o.checkEvent)(n))return!0;var s=(0,i.__read)(t.split("/"),2),u=s[0],c="rev"===s[1];(0,m.setListId)(u),(0,m.setReverseOrder)(c),(0,m.setFromParam)(r||"")},openExternal:function(e,t){void 0===t&&(t=0),(0,u.fetchMediaView)().then((function(){(0,o.statlogsValueEvent)(l.STATLOG_MEDIAVIEW_EVENT,"init","external"),(0,h.upsertPhotos)(e.map((function(e,t){return{id:"external_"+t,photo:e,actions:(0,b.ContextMenu)({withoutWrap:!0,list:[(0,b.ContextMenuItem)({title:(0,x.getLang)("mobile_photos_photo_download"),href:e,target:"_blank"})]})}}))),(0,w.setListItems)({list_id:"external",items:e.map((function(e,t){return"external_"+t}))}),(0,m.setListId)("external"),(0,m.setIndex)(t),(0,p.toggleLayer)({state:!0})}))}};window.photo=V},64712:function(e,t,n){"use strict";n.d(t,{fetchPhotosFx:function(){return o},$lists:function(){return r},$counts:function(){return a},showPhoto:function(){return s},setListItems:function(){return u},insertListItems:function(){return c},setListCount:function(){return l},invalidateList:function(){return d},loadItems:function(){return _}});var i=(0,n(72864).createDomain)("PHOTO/LISTS"),o=i.createEffect(),r=i.createStore({},{name:"lists"}),a=i.createStore({},{name:"counts"}),s=(i.createEvent("preloadItems"),i.createEvent("showPhoto")),u=i.createEvent("setListItems"),c=i.createEvent("insertListItems"),l=i.createEvent("setListCount"),d=i.createEvent("invalidateList"),_=i.createEvent("loadItems")},44167:function(e,t,n){"use strict";n.d(t,{$community_param:function(){return x},$count:function(){return M},$currentItem:function(){return E},$currentList:function(){return y},$currentPhotos:function(){return A},$fullDescriptions:function(){return m},$index:function(){return w},$list_id:function(){return b},$nextItem:function(){return T},$prevItem:function(){return L},$reverse_order_enabled:function(){return I},$targetPhotoID:function(){return k},addIndex:function(){return _},resetTargetPhotoId:function(){return p},setCommunityParam:function(){return d},setFromParam:function(){return l},setFullDescription:function(){return g},setIndex:function(){return c},setListId:function(){return h},setReverseOrder:function(){return v},setTargetPhotoID:function(){return f}});var i=n(79573),o=n(72864),r=n(16144),a=n(64712),s=n(69161),u=(0,o.createDomain)("PHOTO/VIEW"),c=u.createEvent("setIndex"),l=u.createEvent("setFromParam"),d=u.createEvent("setCommunityParam"),_=u.createEvent("addIndex"),h=u.createEvent("setListId"),v=u.createEvent("setReverseOrder"),g=u.createEvent("setFullDescriptions"),f=u.createEvent("setTargetPhotoID"),p=u.createEvent("resetTargetPhotoId"),m=u.createStore({},{name:"fullDescriptions"}),w=u.createStore(0,{name:"index"}),b=(0,o.restore)(h,""),x=((0,o.restore)(l,""),(0,o.restore)(d,null)),I=(0,o.restore)(v,!1),k=(0,o.restore)(f,null),y=(0,o.combine)(b,a.$lists,(function(e,t){return t[e]||[]})),A=(0,o.combine)(y,r.$photos,(function(e,t){return e.map((function(e){return t[e]}))})),M=(0,o.combine)(b,a.$counts,(function(e,t){return t[e]||0})),L=(0,o.combine)([y,r.$photos,w,M,m],(function(e){var t=(0,i.__read)(e,5),n=t[0],o=t[1],r=t[2],a=t[3],u=t[4],c=o[n[(0,s.getCircularIndex)(r-1,a)]];if(c)return(0,i.__assign)((0,i.__assign)({},c),{full_description:u[c.id]})})),E=(0,o.combine)([y,r.$photos,w,m],(function(e){var t=(0,i.__read)(e,4),n=t[0],o=t[1],r=t[2],a=t[3],s=o[n[r]];if(s)return(0,i.__assign)((0,i.__assign)({},s),{full_description:a[s.id]})})),T=(0,o.combine)([y,r.$photos,w,M,m],(function(e){var t=(0,i.__read)(e,5),n=t[0],o=t[1],r=t[2],a=t[3],u=t[4],c=o[n[(0,s.getCircularIndex)(r+1,a)]];if(c)return(0,i.__assign)((0,i.__assign)({},c),{full_description:u[c.id]})}))},64471:function(e,t,n){"use strict";n.d(t,{getListFromDOM:function(){return u},getMediaViewPhoto:function(){return c}});var i=n(71437),o=n(20848);function r(e){var t=document.createElement("div");t.innerHTML=e;var n=t.innerText;return t.remove(),n}var a=n(38869),s=n(44167);function u(e){var t={};if(e){var n=e.closest(".container")||e.closest(".wiki_body")||e.closest(".container")||e.closest(".thumbs_list")||e.closest(".photos_page");n&&(0,i.$$)(".thumb_map_img_as_div, ._image, .ph_img",n).forEach((function(e,n){var i=(0,o.domData)(e,"id"),r=JSON.parse((0,o.domData)(e,"restriction")),a=unescape((0,o.domData)(e,"src_big"));if(!i||!a)return!0;var s=a.split("|"),u=s[0]||e.getAttribute("src"),c=+s[1]||0,l=+s[2]||0;t[n]={id:i,original_src:u||void 0,width:c,height:l,restriction:r,need_reload:1}}))}return t}function c(e,t){var n,o,u,c,l,d,_;if(!e)return null;var h,v=s.$reverse_order_enabled.getState(),g=e.tags&&Object.keys(e.tags).map((function(t){var n=e.tags[t];if("number"!=typeof n){var i=n[0];return{layout:"user",id:t,description:"",left:i[0],top:i[1],width:i[2],height:i[3],avatar:n[4],text:r(n[1]),appereance:{arrow:!!n[2]}}}})).filter((function(e){return!!e})),f=null===(o=null===(n=e.market_tags)||void 0===n?void 0:n.tags)||void 0===o?void 0:o.map((function(e,t){return{layout:"market",id:"market_"+t,left:100*e.x,top:100*e.y,width:0,height:0,title:r(e.title),text:e.price}}));("block"===(null===(u=e.restriction)||void 0===u?void 0:u.type)||"blur"===(null===(c=e.restriction)||void 0===c?void 0:c.type)&&!a.default.isCleared("photo"+e.id,String(null===(l=e.restriction)||void 0===l?void 0:l.restrictionId)))&&(h={type:e.restriction.type,text:"blur"===e.restriction.type?e.restriction.title:e.restriction.text});var p=document.createElement("div");p.innerHTML=e.description||"",p.innerHTML+=e.caption||"";var m=(0,i.$)(".pi_text_more",p);m&&m.removeAttribute("onclick"),p.remove();var w=e.original_src||e.photo,b=e.photo&&e.original_src&&!0!==e.original_src,x=v?"&rev=1":"";return{id:e.id,src:"boolean"==typeof w?"":w,maxSrc:e.max_src,description:p.innerHTML||"",list_id:t,type:1,tags:g,overlayTags:f,restriction:h,hasContextMenu:!0,action:(null===(_=null===(d=e.market_tags)||void 0===d?void 0:d.tags)||void 0===_?void 0:_.length)?{icon:null,text:window.lang.mobile_photos_show_market_items}:null,counters:b?{likes:{state:!!e.likes_me,count:e.likes_cnt||0},replies:{href:"/photo"+e.id+"?list={list_id}"+x,count:+(e.replies_cnt||0)},shares:{count:e.share_cnt||0,state:!1}}:void 0}}},97349:function(e,t,n){"use strict";n.d(t,{Unauthorized:function(){return g},getOpenInAppMyTrackerUrl:function(){return f}});var i=n(85677),o=n(9223),r=n(39871),a=n(40517),s=n(74093),u=n(71437),c=n(76567);function l(e,t){if(d(),e){var n=function(t){s.marketingTransitionItemStat.logEvent(a.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.unauth_action_box.action,window.location.href)},c=(0,i.UnauthorizedActionModal)({type:e.unauth_action_box.action,iconType:e.unauth_action_box.icon_type,iconUrl:e.unauth_action_box.icon_url,title:e.unauth_action_box.header,description:e.unauth_action_box.text,loginUrl:e.sign_in_url,joinUrl:e.sign_up_url,showOpenInApp:e.show_open_in_app,openInAppUrl:e.open_in_app_url}),l=(0,o.default)({body:c}),_=!1,h=function(){_||t&&t(),n(a.MarketingTransitionItemEventType.CLOSE)};(0,o.open)(r.default.elem(l),!0,"",{onClose:function(){h()},onOverlayClick:function(){setTimeout((function(){return h()}),500)}});var v=(0,u.$)(".UnauthorizedActionModal__openInAppButton"),g=(0,u.$)(".UnauthorizedActionModal__signInTextLink"),p=(0,u.$)(".UnauthorizedActionModal__signUpTextLink"),m=(0,u.$)('.UnauthorizedActionModal .Btn[data-type="login"]'),w=(0,u.$)('.UnauthorizedActionModal .Btn[data-type="join"]'),b=function(e){window.ModalMenu.close(e)},x=function(e,t){var i=e.target;_=!0,n(t),b(i),e.preventDefault(),e.stopPropagation(),setTimeout((function(){return window.nav.go(i)}),110)};[m,g].forEach((function(e){null==e||e.addEventListener("click",(function(e){x(e,a.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),[w,p].forEach((function(e){null==e||e.addEventListener("click",(function(e){x(e,a.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),null==v||v.addEventListener("click",(function(e){var t=e.target;_=!0,n(a.MarketingTransitionItemEventType.CLICK_OPEN_IN_APP),b(t),e.preventDefault(),e.stopPropagation();var i=t.getAttribute("href");if(i){var o=f(i);setTimeout((function(){return window.nav.go(o)}),110)}})),n(a.MarketingTransitionItemEventType.OPEN)}}function d(){window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,write_ab:1})}var _,h=0,v=!1;var g={onActionClick:function(e,t,n){var i;(null===(i=window.UnauthorizedFeed)||void 0===i?void 0:i.isActive)?window.UnauthorizedFeed.onAction(e,t):window.vk.id||(null==e||e.preventDefault(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:t,object:n,to:window.location.href.replace(window.location.origin,"")},{onDone:function(e){e.unauth_action_box&&l(e)}}))},onMoreBoxActionClick:function(e,t){e&&(t&&s.marketingTransitionItemStat.logEvent(a.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,a.MarketingTransitionItemSourceType.MORE,window.location.href),e.preventDefault(),e.stopPropagation(),setTimeout((function(){return window.nav.go(e.target)}),110))},initScrollMoreBox:function(e){var t,n=function(){v=!1,window.removeEventListener("scroll",_)};n(),h=Date.now(),_=function(){v||Date.now()-h<2e3||(window.cur.unauthScrollMoreBox||window.pageYOffset>=2*window.innerHeight&&(v=!0,l(e)))},window.addEventListener("scroll",_),null===(t=window.cur.destroy)||void 0===t||t.push((function(){return n()}))},showMoreBox:function(e,t,n,i){e&&e.preventDefault(),d(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:"more",owner_id:t,source:n,to:window.location.href.replace(window.location.origin,"")},{loader:!0,onDone:function(e){e.unauth_action_box&&l(e,i)}})},writeUnauhActionBoxABGroup:d};function f(e){var t=e.includes("?")?"&":"?";return""+e+t+"unauth_id="+(0,c.getCookie)("remixstid")+"&target_url="+encodeURIComponent(window.location.href)}},66325:function(e,t,n){"use strict";n.d(t,{getPhotoSize:function(){return o}});var i=n(79573);function o(e,t,n){if(void 0===n&&(n=null),!Array.isArray(e)||!e.length)return null;var o=function(e,t,n){void 0===n&&(n=null);var o=(0,i.__spreadArray)([],(0,i.__read)(e),!1).sort((function(e,t){return e.width<t.width?-1:e.width===t.width?e.height>t.height?1:-1:1})),r=o[o.length-1],a=o.filter((function(e){return e.width>=t}));if(!a.length)return r;if(!n)return a[0];var s=a.findIndex((function(e){return e.height>=n}));if(s>=0)return a[s];var u=a.sort((function(e,t){return e.height>t.height?1:-1}));return u[u.length-1]}(e,t,n);return{url:o.url||o.src||"",width:o.width,height:o.height}}},59866:function(e,t,n){"use strict";n.d(t,{UnauthorizedSourceType:function(){return i}});var i={PHOTO:"photo",VIDEO:"video",AUDIO:"audio",COMMENTS:"comments"}}},function(e){"use strict";e.O(0,[4578,1777,4736,5456,5790,3898,5411,6855,6199,490,410,6444,8592,7219,6429],(function(){return t=29476,e(e.s=t);var t}));e.O()}]);