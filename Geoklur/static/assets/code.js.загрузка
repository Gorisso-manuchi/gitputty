var _tmr=_tmr||[];
(function(){function v(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function B(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function ab(a){return null===a.offsetParent||0==a.offsetHeight||0==a.offsetLeft||0==a.offsetTop||0==a.offsetWidth||0==a.clientHeight||0==a.clientWidth?!1:void 0===e.getComputedStyle?(a=e.getComputedStyle(a,null),"none"!=a.getPropertyValue("display")&&"hidden"!=a.getPropertyValue("visibility")):
!0}function X(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1}function Y(a){var b=typeof a;return!("number"===b||"boolean"===b||"string"===b||a.nodeType||a===a.window)}function ja(){var a=arguments,b=a[0]||{},c=!1,d=1,k=a.length,h,f,u,g,e;"boolean"===typeof b&&(c=b,b=a[d++]||{});for(Y(b)||(b={});d<k;d++)if(null!=(h=a[d]))for(f in h)u=b[f],g=h[f],b!==g&&(c&&g&&(Y(g)||(e="[object Array]"===Object.prototype.toString.call(g)))?(e?(e=!1,u=u&&"[object Array]"===Object.prototype.toString.call(u)?
u:[]):u=u&&Y(u)?u:{},b[f]=ja(c,u,g)):void 0!==g&&(b[f]=g));return b}function wa(a){var b="";try{var c=new Uint8Array(a);e.crypto.getRandomValues(c);for(var d=0;d<a;d++)b+=(c[d]%16).toString(16)}catch(k){b="";for(d=0;d<a;d++)c=Math.floor(16*Math.random()),b+=c.toString(16)}return b}function p(){return(new Date).getTime()}function x(a,b){var c={data:b,raw:a,url:"https://top-fwz1.mail.ru"+a};if(void 0===b)c.dataSplitter=";",c.open=bb,c.connect=cb,c.startListen=db,c.stopListen=eb,c.open(c),c.connect(c);
else{var d;"function"===typeof e.XMLHttpRequest?(c.dataSplitter=";",c.open=fb,c.connect=gb,c.startListen=hb,c.stopListen=ib,c.open(c),c.connect(c),d=!0):d=!1;d||jb(c)}}function jb(a){var b=g.createElement("iframe"),c=g.createElement("div");c.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");c.appendChild(b);g.body.appendChild(c);try{var d=b.contentWindow.document,k=d.createElement("div"),h;for(h in a.data)if(a.data.hasOwnProperty(h)){var f=
a.data[h],u=typeof f;if("string"===u||"number"===u){var e=d.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name",h);e.value=f;k.appendChild(e)}}var l=d.createElement("form");l.setAttribute("action",a.url);l.setAttribute("method",xa);l.setAttribute("enctype",ya);l.appendChild(k);var p=d.createElement("div");p.appendChild(l);d.body.appendChild(p);var n=function(){try{B(b,"load",n),g.body.removeChild(c)}catch(a){m&&console.warn("[TopMailRu] Error#1.2",a)}};v(b,"load",n);l.submit()}catch(r){m&&
console.warn("[TopMailRu] Error#1.3",r)}}function fb(a){a._connection=new e.XMLHttpRequest}function gb(a){a._connection.open(xa,a.url);a._connection.setRequestHeader("Content-Type",ya);a._connection.send(ka(a.data,a.dataSplitter))}function hb(a){v(a._connection,"load",a._onload);v(a._connection,"error",a._onerror)}function ib(a){B(a._connection,"load",a._onload);B(a._connection,"error",a._onerror)}function bb(a){a._connection=new Image}function cb(a){a._connection.src=a.url+ka(a.data,a.dataSplitter)}
function db(a){a._connection.onload=a._onload;a._connection.onerror=a._onerror}function eb(a){a._connection.onload=null;a._connection.onerror=null}function ka(a,b){var c=b||";",d="",k;for(k in a)if(a.hasOwnProperty(k)){var h=a[k],f=typeof h;if("string"===f||"number"===f)d+=c+escape(k)+"="+escape(h)}return d}function Z(a){return(a=g.cookie.match(RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):null}function J(a,b,c){c=c||{};var d=c.expires;"number"===
typeof c.expires&&(d=new Date,d.setTime(d.getTime()+c.expires));d&&d.toUTCString&&(d=d.toUTCString());c.expires=d;a=a+"="+encodeURIComponent(b);for(var k in c)if((b=c[k])||0===b)a+="; "+k,!0!==b&&(a+="="+b);g.cookie=a}function kb(){var a="tmr"+(""+Math.random()).slice(2);try{return K=e.localStorage||null,K.setItem(a,a),K.removeItem(a),!0}catch(b){return K=null,m&&console.warn("[TopMailRu] Error#1.4",b),!1}}function lb(){if(!$)return null;for(var a=w.hostname.split(".").reverse(),b,c=1,d=a.length;c<
d;c++){b=a[0];for(var k=1;k<=c;k++)b=a[k]+"."+b;var k=""+p(),h={domain:b,path:"/",expires:3E5};try{J("tmr_tcdhn",k,h);var f=Z("tmr_tcdhn"),h=h||{};h.expires=-1;J("tmr_tcdhn","",h);if(f===k)return b}catch(g){m&&console.warn("[TopMailRu] Error#1.8",g)}}return null}function aa(a,b){$&&J(a,b,za);if(la)try{K.setItem(a,b)}catch(c){m&&console.warn("[TopMailRu] Error#1.6",c)}}function ma(a){var b;if(!(b=$?Z(a):null)){var c;if(la)a:{try{c=K.getItem(a);break a}catch(d){m&&console.warn("[TopMailRu] Error#1.5",
d)}c=null}else c=null;b=c}return b}function Aa(a){var b=";e="+escape("detect");x(s(a,"/tracker",!1,!1)+b)}function Ba(a,b){if(a.length&&null!==b.ecom_data){var c=P(b.ecom_data),c=c?(""+c).substring(1,c.length-1):"";if(!(4096<c.length||-1===c.search(/\S/))){var d=na("_m",b.ecom_method),k=na("_t",b.ecom_type),h=na("_jst",Ca()),c="{"+c+d+k+h+"}";x(s({id:a[0]},"/datalayer",!1,!1)+(";ids="+escape(a.join()))+(";e="+escape(c)))}}}function na(a,b){var c=',"'+a+'":';if(!b||!b.length)return c+"[]";try{return c+
'["'+b.join('","')+'"]'}catch(d){}return c+"false"}function mb(){var a=Z(Da);if(null===a)return null;a=a.split("|");if(3!==a.length)return null;var b=a[2],b=p()-b;return 0>b||b>Ea?null:{id:a[0],version:a[1]}}function l(){}function Q(a){a&&"object"===typeof a&&(!C&&"id"in a)&&(C=a.id)}function nb(a){return(a=!D?void 0:D[a])&&oa?a-oa:void 0}function Fa(){if(D){for(var a=0,b="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),c=0;c<
b.length;c++){var d=!D?void 0:D[b[c]];if(0<d&&(d<a||0==a))a=d}return a?a:void 0}}function R(a){return a&&"object"===typeof a&&("id"in a&&a.id||C)}function s(a,b,c,d){aa(pa,++L);var k="id"in a?a.id:C,h="url"in a?a.url:w.href,f="referrer"in a?a.referrer:g.referrer,u="title"in a?a.title:g.title,l;l=qa;null===l&&(l=ob());l=null!==l?l?1:0:null;var q="userid"in a?a.userid:z||0===z?z:void 0,v=G?G:void 0,n;n=[];C&&k!==C&&n.push("sec");"dataLayer"in e&&n.push("dl");E&&n.push(["ecom"].concat(E).join("-"));
var r=pb();r&&r.length&&n.push(["jst"].concat(r).join("-"));n=n.join(",");var t=e.screen,y,r=(new Date).getTimezoneOffset();y="";if(e.Intl)try{y=e.Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(qb){m&&console.warn("[TopMailRu] Error#1.1",qb)}y=r+"/"+y;r=Ga;r=null!==r?r:mb();a.start=Fa();b=b+"?js=13"+(k?";id="+escape(k):"")+(h?";u="+escape(h):"")+(f?";r="+escape(f):"")+(a.start?";st="+escape(a.start):"")+("gender"in a?";gender="+escape(a.gender):"")+("age"in a?";age="+escape(a.age):"")+
("pid"in a?";pid="+escape(a.pid):"")+(void 0!==q?";userid="+escape(q):"")+(void 0!==v?";uparams="+escape(P(v)):"")+(d&&u?";title="+encodeURIComponent(u):"")+(t?";s="+t.width+"*"+t.height:"")+";vp=";k=d=0;g.documentElement&&(g.documentElement.clientWidth||g.documentElement.clientHeight)?(d=g.documentElement.clientWidth,k=g.documentElement.clientHeight):"number"==typeof e.innerWidth&&(d=e.innerWidth,k=e.innerHeight);b=b+(""+d+"*"+k)+";touch="+rb+";hds="+sb+";frame="+tb+";flash=";if(null===S)if(S="",
F.plugins&&F.plugins["Shockwave Flash"])S=F.plugins["Shockwave Flash"].description.split(" ")[2];else if(e.ActiveXObject)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),A=A.GetVariable("$version"),A=A.split(" ")[1].split(",");S=A[0]+"."+A[1]}catch(ub){m&&console.warn("[TopMailRu] Error#1.12",ub)}A=b+S+";sid="+Ha+";ver="+Ia+";tz="+encodeURIComponent(y);if(c){if(!D||!ra)c="";else{c=[];c.push(ra.type);c.push(ra.redirectCount);c.push(oa);for(b=0;b<Ja.length;b++)c.push(nb(Ja[b]));c=c.join("/")}c=
";nt="+c}else c="";c=A+c+("device"in a?";device="+escape(a.device):"")+";ni=";if(!F||!F.connection)A="";else{A=F.connection;b=[];for(k=0;k<Ka.length;k++){d=A[Ka[k]];if(void 0!==d)switch(d){case !0:d=1;break;case !1:d=0;break;default:d=(""+d).replace(/\//g,"_")}b.push(d)}A=b.join("/")}return c+A+("params"in a?";params="+escape(P(a.params)):"")+(null!==l?";detect="+l:"")+($||la?";lvid="+escape([T,p(),L,M].join(":")):"")+(n?";opts="+escape(n):"")+(r?";flocid="+escape(r.id)+";flocv="+escape(r.version):
"")+("version"in a?";appver="+escape(a.version):"")+(N.support?";visible="+N.getValue():"")+";_="+Math.random()}function La(a){a=";e="+escape("PVT/"+a);for(var b=0;b<t.length;b++)x(s(t[b],"/tracker",!1,!0)+a)}function vb(){qa=!0;Ma(1);if(!Na&&!U){U=!0;for(var a=0;a<t.length;a++)Aa(t[a])}}function wb(){Ma(0);qa=!1}function ob(){var a=Z(Oa);if(null===a)return null;a=a.split("|");if(2!==a.length)return null;var b=a[1],b=p()-b;if(0>b||b>Pa)return null;a=parseInt(a[0],10);return isNaN(a)?null:a}function Ma(a){var b=
p();a=[a,b].join("|");J(Oa,a,{path:"/",expires:Pa})}function ba(){g.addEventListener?(B(g,"DOMContentLoaded",ba),_tmr.onready()):g.attachEvent&&"complete"===g.readyState&&(B(g,"readystatechange",ba),_tmr.onready())}function Qa(){B(e,"load",Qa);_tmr.onready();_tmr.onload()}function ca(){B(e,"unload",ca);B(e,"beforeunload",ca);_tmr.unload()}if("[object Array]"===Object.prototype.toString.call(_tmr)){var e=window,F=navigator,g=document,w=location,V="string"===typeof w.hostname?w.hostname:"",da=-1!=V.search(/(^|\.)odnoklassniki\.ru$/)||
-1!=V.search(/(^|\.)ok\.ru$/),ea=-1!=V.search(/(^|\.)vk\.com$/),xb=-1!=V.search(/(^|\.)lamoda\.ru$/),yb=-1!=V.search(/(^|\.)kommersant\.ru$/),zb="string"===typeof w.search&&-1!=w.search.search(/[?&]rb_clickid=/),m="string"===typeof w.search&&-1!=w.search.search(/[?&]tmr_debug=1(?:&|$)/),Ra=da||ea||xb||yb,Ab=!zb,Bb=da||ea,Cb=da||ea,Sa=da||ea,Na=!1,P=e.JSON&&JSON.stringify?JSON.stringify.bind(JSON):function(a){return""},xa="POST",ya="application/x-www-form-urlencoded",$=!(0===w.hostname.search(/^(\d+.)+\d+$/g)||
-1!==w.hostname.search(/:/g)),K=null,la=kb(),za={domain:lb(),path:"/",expires:287712E5};(function(){var a;if(a=g.cookie.match(RegExp("(?:^|; )(tmr_tcdhn\\d+)=([^;]*)","g"))){for(var b=[],c,d=0,k=a.length;d<k;d++)c=a[d],(c=c.match(/(?:^|; )(tmr_tcdhn\d+)=([^;]*)/))&&b.push(c.slice(1));a=b}else a=null;if(a){b=0;for(d=a.length;b<d;b++)k=a[b][0],c=za||{},c.expires=-1,J(k,"",c)}})();var U=!1,qa=null,Pa=864E5,Oa="tmr_detect",Db=function(){function a(a,b){for(var c=a.length,f,g,e=0;e<b;e++)g=Math.floor(Math.random()*
c),f=a[e],a[e]=a[g],a[g]=f;return a.slice(0,b)}function b(b,k){var h=g.createElement("div"),f=String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,100,118,101,114,116,66,108,111,99,107,32,98,45,114,98,32,98,97,110,110,101,114,95,50,52,48,32,112,45,116,97,114,103,101,116,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,112,117,98,95,55,50,56,120,57,48,32,114,98,95,98,111,100,121,32,114,98,45,102,108,111,97,116,105,110,
103,32,114,98,45,115,108,111,116,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,116,101,120,116,45,97,100,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,98,97,110,110,101,114,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,65,100,32,116,101,120,116,97,100,32,116,101,120,116,65,100,115,32,116,101,120,116,97,100,115,32,116,103,98,45,98,97,110,110,101,114,32,116,114,103,45,98,45,98,97,110,110,
101,114,45,98,108,111,99,107).split(" "),f=a(f,c);h.setAttribute("class",f.join(" "));h.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;");h.setAttribute("id","trg-b-banners-1");h.setAttribute("data-view","SlotView.mimic");this.bait=g.body.appendChild(h);this.bait.offsetParent;this.bait.offsetHeight;this.bait.offsetLeft;this.bait.offsetTop;this.bait.offsetWidth;this.bait.clientHeight;this.bait.clientWidth;
this.loopNumber=0;this.fnPositive=b||null;this.fnNegative=k||null;var e=this;setTimeout(function(){e._checkBait.call(e)},1)}var c=7;b.prototype._checkBait=function(){if(U)this._stop();else{var a=null!==g.body.getAttribute("abp")||!ab(this.bait);(!0===a||10<=++this.loopNumber)&&this._stop();var b;if(a&&this.fnPositive)try{b=this.fnPositive,b()}catch(c){m&&console.warn("[TopMailRu] Error#1.9",c)}else if(!a&&10>this.loopNumber){var f=this;setTimeout(function(){f._checkBait.call(f)},50*this.loopNumber)}else try{b=
this.fnNegative,b()}catch(e){m&&console.warn("[TopMailRu] Error#1.10",e)}}};b.prototype._stop=function(){try{g.body.removeChild(this.bait)}catch(a){m&&console.warn("[TopMailRu] Error#1.11",a)}};return function(a,c){new b(a,c)}}(),E=null,Ta="ecommerce",Ua=!1,sa=[],Eb=[36383,2540645,3171181,3074137,2057653],Fb=[],Va;(function(){function a(a,b){for(var c=0,d=b.length;c<d;c++)-1===a.indexOf(b[c])&&a.push(b[c])}function b(b,c,d){for(var k={ecom_method:[],ecom_type:[],ecom_data:{events:[]}},f=0,g=b.length;f<
g;f++){var h=y[b[f]];if(h){a(k.ecom_method,[b[f]]);for(var e=0,l=h.length;e<l;e++)for(var u=0,n=d.length;u<n;u++){var m=h[e][d[u]];if(m)for(var p=0,r=c.length;p<r;p++)if(-1!==h[e].type.indexOf(c[p])){a(k.ecom_type,[c[p]]);a(k.ecom_data.events,m);break}}}}return k}function c(a,b,c){if(!a||!c||!(b in y))return null;for(var d,k=0,f=y[b].length;k<f;k++)if(d=y[b][k],c in d&&-1!==d[c].indexOf(a))return{ecom_method:[b],ecom_type:d.type.slice(),ecom_data:{}};return null}function d(a){for(var d=[],f,e,n=0,
y=a.length;n<y;n++)if(e=a[n]){f=null;try{if(e.ecommerce)f=k(e)||h(e);else if(null===e.ecommerce)f=null;else if(e.event){var q={event:e.event,ecommerce:{}};f=k(q)||h(q)}else if("event"===e[0]){var v=e[1],x=e[2],w=c(v,l,r);w&&(w.ecom_data[v]=x);f=w}else if(e.event===Ta)a:{for(var s=b([g],[p],[t]),z=0,B=s.ecom_data.events.length;z<B;z++)if(!e.hasOwnProperty(s.ecom_data.events[z])){f=null;break a}delete s.ecom_data.events;s.ecom_data[Ta]=e;f=s}}catch(C){m&&console.warn("[TopMailRu] Error#1.23",C),f=null}f&&
(d.push(f),sa.push(f))}if(d.length){a=0;for(f=d.length;a<f;a++)Ba(fa,d[a]);E||(E=[0,0]);E[0]+=d.length;f=a=0;for(n=d.length;f<n;f++)a+=P(d[f].ecom_data).length;E[1]+=a}}function k(a){var b,d;for(d in a.ecommerce)if(a.ecommerce.hasOwnProperty(d)&&(b=c(d,g,q))){if(a.event&&(d=c(a.event,g,n)))for(var f=0,k=b.ecom_type.length;f<k;f++)-1===d.ecom_type.indexOf(b.ecom_type[f])&&(b.ecom_type.splice(f,1),k--,f--);b.ecom_data=a.ecommerce;return b}return null}function h(a){var b=a.event,d=c(b,g,n);d&&(d.ecom_data[b]=
a.ecommerce);return d}function f(a){if((a=e[a])&&"function"===typeof a.push){d(a);var b=a.push;a.push=function(){var a=b.apply(this,arguments);d([].slice.call(arguments,0));return a}}}var g="push",l="gtag",p="gse",q="inner",n="outer",r="external",t="required",y={};y[l]=[{type:["gee"],external:"add checkout checkout_option checkout_progress click detail promo_click remove select_content set_checkout_option view_refund".split(" ")},{type:["ga4"],external:"earn_virtual_currency join_group level_end level_start level_up post_score select_content spend_virtual_currency tutorial_begin tutorial_complete unlock_achievement ad_impression login search share sign_up add_payment_info add_shipping_info add_to_wishlist generate_lead select_item select_promotion view_cart view_item_list".split(" ")},
{type:["gee","ga4"],external:"add_to_cart begin_checkout purchase refund remove_from_cart view_item view_promotion".split(" ")}];y[g]=[{type:[p],required:["transactionId","transactionTotal"]},{type:["ga4"],outer:b([l],["ga4"],[r]).ecom_data.events},{type:["gee"],inner:"click checkout checkout_option impressions promoClick promoView refund".split(" "),outer:"addToCart checkout checkoutOption productClick productDetail ProductImpressions promotionClick promotionView removeFromCart transactionPush".split(" ")},
{type:["ym","gee"],inner:["add","detail","purchase","remove"]}];Va=function(){f("dataLayer");Ua=!0}})();var Ca=function(){var a=[{id:"gtag",globalVars:["google_tag_manager"]},{id:"ga",globalVars:["GoogleAnalyticsObject"]},{id:"ym",globalVars:["Ya",{re:"yaCounter\\d+"}]},{id:"vk",globalVars:["VK","vkAsyncInit"]}],b={};return function(){var c;try{c=Object.keys(e).join(",")}catch(d){c=null}for(var k=[],h,f=0,g=a.length;f<g;f++){h=b[a[f].id];if(void 0===h)a:{h=a[f].globalVars;for(var l=c,m=0,p=h.length;m<
p;m++){var n=h[m];if("string"===typeof n&&!(n in e)||"string"===typeof n.re&&(l&&-1===l.search(RegExp("($|,)"+n.re+"(,|^)","m"))||1===p)){h=!1;break a}}h=!0}h&&(b[a[f].id]=!0,k.push(a[f].id))}return k}}(),pb=Ca,Ea=864E5,Da="tmr_floc",Ga=null;(function(a){try{g.interestCohort&&"function"===typeof g.interestCohort&&g.interestCohort().then(function(a){Ga={id:a.id,version:a.version};a=[a.id,a.version];var b=p();a=a.concat(b).join("|");J(Da,a,{path:"/",expires:Ea})},function(){})}catch(b){}})();var N=
{support:!1},N=function(){function a(){d(h)}function b(){d(h,t)}function c(){return f?!g[f]:null}function d(a,b){var d=p(),f="undefined"===typeof b?c():b;if(null===n[a])n[a]={ts:d,state:f,total:0};else{var e=n[a];if(e.state!==f){var h=d-e.ts,g=e.state;e.ts=d;e.state=f;h<k||(g===m?(e.total+=h,r&&r(d,h)):g===q&&s&&s(d,h))}}}var k=5,h="auto",f=null,l=null,m=!0,q=!1,t=null;"hidden"in g?(f="hidden",l="visibilitychange"):"mozHidden"in g?(f="mozHidden",l="mozvisibilitychange"):"webkitHidden"in g?(f="webkitHidden",
l="webkitvisibilitychange"):"msHidden"in g&&(f="msHidden",l="msvisibilitychange");var n={};n[h]=null;var r=n.user=null,s=null;return{support:!!f,auto:function(c,d){r=c||null;s=d||null;f&&(a(),v(g,l,a));v(e,"beforeunload",b);v(e,"unload",b)},set:function(a){d("user",!!a)},getLog:function(){var a=p(),b={},c,d;for(d in n)c=n[d],b[d]=c?c.total:0,c&&c.state&&(b[d]+=a-c.ts);return b},getValue:c}}();N.auto();var Ia="60.3.0",ta=0,ga=0,Ha=wa(16),z=null,G=null,ha=0,pa="tmr_reqNum",L=ma(pa),L=null===L?0:parseInt(L,
10);aa(pa,L);var M=ma("tmr_lvid"),T=ma("tmr_lvidTS");if(null===M||-1===M.search(/^[0-9a-fA-F]+$/))M=wa(32);aa("tmr_lvid",M);if(null===T||-1===T.search(/^\d+$/))T=""+p();aa("tmr_lvidTS",T);var C=0,t=[],ua=[],ia=[],fa=[],rb="ontouchstart"in e||1<(F.maxTouchPoints||F.msMaxTouchPoints)?"1":"0",sb=e.devicePixelRatio||0,tb=e.top===e?0:1,S=null,Wa=e.performance||e.mozPerformance||e.msPerformance||e.webkitPerformance||{},D=Wa.timing||{},ra=Wa.navigation||{},Ja="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
oa=!D?void 0:D.navigationStart,Ka="downlink downlinkMax effectiveType rtt saveData type".split(" "),H,va;H=function(a,b,c){if(b&&"object"===typeof b){var d="id"in b&&b.id||C,e=c.title||null,h,f=va(b,{params:c.required,fn:c.fn});if(f.missed.length)console.warn("[TopMailRu]"+(d?"["+d+"]":"")+" Error#1.14","Unspecified "+(1<f.missed.length&&f.missed.slice(0,-1).join(", ")+" and "||"")+f.missed.slice(-1)+" in "+a);else{var g=va(b,{params:c.optional,fn:c.fn});h=[].concat(f.values).concat(g.values);f=[].concat(f.missed).concat(g.missed);
c.value&&(b="value"in b&&b.value,!0!==c.value&&(b=b||c.value),b?h.push("value: "+b):f.push("value"));c=h.length?"{ "+h.join(", ")+" }":"";h=f.length?"("+(1<f.length?f.slice(0,-1).join(", ")+" and "+f.slice(-1)+" are":f.slice(-1)+" is")+" empty)":"";d?console.info("[TopMailRu]["+d+"]: "+(e||a)+" "+c+" "+h):console.warn("[TopMailRu] Error#1.15","Undefined counter ID of "+a+" "+c)}}else console.warn("[TopMailRu][]["+a+"] Error#1.13")};va=function(a,b){var c=[],d=[],e,g,f;if(b.params)for(e in b.params)if(b.params.hasOwnProperty(e)&&
!1!==b.params[e])if(g=e in a&&a[e],!0!==b.params[e]&&(g=g||b.params[e]),g)try{f=b.fn?b.fn:null,c.push(e+': "'+(f?f(e,g):g)+'"')}catch(l){console.warn("[TopMailRu] Error#1.16",l)}else d&&d.push(e);return{values:c,missed:d}};l.prototype.callbackOnReady=function(a){m&&H("onReady",a,{title:"OnReady callback"});a&&"object"===typeof a&&"function"===typeof a.callback&&a.callback.call(a.context||null)};l.prototype.pageView=function(a){Q(a);if(a&&("object"===typeof a&&a.id)&&(5>ua.length&&!X(a.id,ua)&&(ua.push(a.id),
!1!==a.beat&&ia.push(a.id),t.push(a),U&&Aa(a)),5>fa.length&&!X(a.id,fa)&&(!0===a.ecom||!1!==a.ecom&&(X(a.id,Eb)||!X(a.id,Fb))))){fa.push(a.id);var b=[a.id];if(Ua)for(var c=0,d=sa.length;c<d;c++)Ba(b,sa[c])}m&&H("pageView",a,{title:"Page view",optional:{url:w.href}});R(a)&&(x(s(a,"/counter",!1,!0)),ga=p())};l.prototype.reachGoal=function(a){Q(a);m&&H("reachGoal",a,{title:"Reach goal",value:!0,required:{goal:!0}});if(R(a)&&"goal"in a&&a.goal){var b="value"in a&&a.value?parseInt(a.value)||"":"";x(s(a,
"/tracker",!1,!0)+(";e="+escape("RG:"+b+"/"+a.goal)))}};l.prototype.itemView=function(a){m&&H("itemView",a,{title:"Item view",optional:{list:!0,pagetype:!0,productid:!0,totalvalue:!0},fn:function(a,b){return(""+b).replace(/;/g," ")}});if(R(a)){var b=a.list||"",c=a.productid||"",d=a.pagetype||"",e=a.totalvalue||0;(new Image).src="https://ad.mail.ru/retarget/?counter="+(a.id||C)+"&list="+b+"&productid="+c+"&pagetype="+d+"&totalvalue="+e+"&_="+Math.random();b="IV:"+e+"/"+(""+b).replace(/;/g," ")+";"+
(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");x(s(a,"/tracker",!1,!1)+(";e="+escape(b)))}};l.prototype.sendEvent=function(a){Q(a);m&&H("sendEvent",a,{title:"Send event",value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(a,b){return(""+b).substring(0,300).replace(/;/g," ")}});if(R(a)&&"category"in a&&a.category&&"action"in a&&a.action){var b=(""+a.category).substring(0,300),c=(""+a.action).substring(0,300),d="label"in a&&a.label?(""+a.label).substring(0,300):"",b="CE:"+
("value"in a&&a.value?parseInt(a.value)||"":"")+"/"+(""+b).replace(/;/g," ")+";"+(""+c).replace(/;/g," ")+";"+(""+d).replace(/;/g," ");x(s(a,"/tracker",!1,!1)+(";e="+escape(b)))}};l.prototype.setUserID=function(a){if(null===a||!1===a||void 0===a)this.deleteUserID();else{var b=typeof a;"number"!==b&&"string"!==b?m&&console.warn("[TopMailRu] Error#1.17","Invalid user ID in setUserID"):(z=a,m&&console.info("[TopMailRu]: Global user ID = "+z))}};l.prototype.getUserID=function(){return z||0===z?z:void 0};
l.prototype.deleteUserID=function(){z=null;m&&console.info("[TopMailRu]: Reset global user ID to null")};l.prototype.setUserParams=function(a){if(null===a||!1===a||void 0===a)this.deleteUserParams();else if(Y(a)){try{G=ja(!0,{},a)}catch(b){m&&console.warn("[TopMailRu] Error#1.22","Invalid user params in setUserParams");return}m&&console.info("[TopMailRu]: Global user params = "+P(G))}else m&&console.warn("[TopMailRu] Error#1.21","Invalid user params in setUserParams")};l.prototype.getUserParams=function(){var a=
G?G:void 0;return a?ja(!0,{},a):void 0};l.prototype.deleteUserParams=function(){G=null;m&&console.info("[TopMailRu]: Reset global user params to null")};l.prototype.getClientID=function(){var a=M;return a||0===a?a:void 0};l.prototype._MT_event=function(a,b,c){Q(a);m&&H(b,a,{title:c});R(a)&&x(s(a,"/tracker",!1,!0)+(";e="+escape("MT:/"+b)))};l.prototype.miniAppEvent=function(a){this._MT_event(a,"miniAppEvent","VK Mini App Event")};l.prototype.processEvent=function(a,b){if(a&&"object"===typeof a)if("type"in
a){if("onready"===a.type){if(b&&0>b)return;this.callbackOnReady(a)}else if(b&&0<b)return;switch(a.type){case "pageView":this.pageView(a);break;case "reachGoal":this.reachGoal(a);break;case "itemView":this.itemView(a);break;case "sendEvent":this.sendEvent(a);break;case "setUserID":"userid"in a&&this.setUserID(a.userid);break;case "deleteUserID":this.deleteUserID();break;case "setUserParams":"params"in a&&this.setUserParams(a.params);break;case "deleteUserParams":this.deleteUserParams();break;case "miniAppEvent":this.miniAppEvent(a)}}else m&&
console.warn("[TopMailRu] Error#1.19","Unspecified type of push event");else m&&console.warn("[TopMailRu] Error#1.18","Invalid push event")};l.prototype.push=function(a){for(var b=0,c=arguments.length;b<c;b++)this.processEvent(arguments[b])};var Xa=!1;l.prototype.onready=function(){Xa||(Xa=!0,!Na&&!U&&Db(vb,wb),Va())};var Ya=!1;l.prototype.onload=function(){if(!Ya){Ya=!0;ha=p();if(!Cb&&0<t.length){for(var a=";e="+escape("RT/load")+";et="+ha,b=0;b<t.length;b++)x(s(t[b],"/tracker",!0,!1)+a);ga=ha}Ab||
setTimeout(function(){La(2)},2E3);Bb||setTimeout(function(){La(15)},15E3)}};l.prototype.beat=function(){if(!Ra&&ta){var a=p();if(!(12E4<a-ta)){if(12E4<a-ga)for(var b=";e="+escape("RT/resend")+";et="+ha,c=0;c<t.length;c++)!1!==t[c].beat&&x(s(t[c],"/tracker",!1,!0)+b);else 0<ia.length&&x("/tracker?"+ka({js:"13",id:ia[0],e:"RT/beat",sid:Ha,ids:ia.join(),ver:Ia,_:Math.random()},";"));ga=a}}};var Za=!1;l.prototype.unload=function(){if(!Za&&(Za=!0,!Sa)){var a;a=(a=Fa())?p()-a:void 0;a=";e="+escape("RT/unload")+
";et="+p()+(a?";pvt="+escape(a):"");if(N.support){var b=N.getLog();a+=";vtauto="+b.auto}for(b=0;b<t.length;b++)x(s(t[b],"/tracker",!1,!1)+a)}};l.prototype.activity=function(a){ta=p()};var O=_tmr;_tmr=new l;for(var q=0,W=O.length,I;q<W;q++)(I=O[q])&&"object"===typeof I&&Q(I);q=0;for(W=O.length;q<W;q++)I=O[q],_tmr.processEvent(I,1);q=0;for(W=O.length;q<W;q++)I=O[q],_tmr.processEvent(I,-1);if("complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll)_tmr.onready();else g.addEventListener?
v(g,"DOMContentLoaded",ba):g.attachEvent&&v(g,"readystatechange",ba);if("complete"===g.readyState)_tmr.onload();else v(e,"load",Qa);Sa||(v(e,"unload",ca),v(e,"beforeunload",ca));if(!Ra){setInterval(function(){_tmr.beat()},6E4);try{for(var $a="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" "),Gb=function(a){v(g,a,function(){_tmr.activity(a)})},q=0;q<$a.length;q++)Gb($a[q]);v(e,"scroll",function(){_tmr.activity("scallback")})}catch(Hb){m&&console.warn("[TopMailRu] Error#1.20",
Hb)}}}})();
