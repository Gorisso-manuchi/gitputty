(self.webpackChunkvk=self.webpackChunkvk||[]).push([[7004],{29198:function(e,r,n){"use strict";var i=n(79573),t=n(91896),s=n(56769),a=n(94078),o=n(62641),c=n(75280),d=n(83194);function u(e,r){void 0===e&&(e="SearchQuery");var n=(0,i.__read)((0,s.useState)(!1),2),t=n[0],o=n[1],c=(0,s.useContext)(a.SearchContext);return(0,s.useEffect)((function(){c&&(window.cur[e]=c.query,o(!0))}),[c]),t?window.cur[e]||void 0:r}var l=function(e){return u(e.cacheKey),null},_=new a.APIAdapter;_.getHintData=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var t=a.getHintData.apply(void 0,(0,i.__spreadArray)([],(0,i.__read)(r),!1));return(0,i.__assign)((0,i.__assign)({},t),{url:null===(e=t.url)||void 0===e?void 0:e.replace("https://vk.com/","/")})};var h=function(e){var r=u(e.cacheKey,e.initialQuery);return(0,t.jsx)(a.APIAdapterContext.Provider,(0,i.__assign)({value:_},{children:(0,t.jsx)(a.VKAPISearchProvider,(0,i.__assign)({limit:20,initQuery:r,onMoreResultsOpen:function(e){return window.nav.go("/search?q="+e)},lang:{not_found:(0,o.getLang)("mobile_search_not_found"),placeholder:(0,o.getLang)("mobile_search"),empty_query:""}},{children:e.children}),void 0)}),void 0)},v="HeaderSearchQuery",f=function(){var e=(0,i.__read)((0,s.useState)(!1),2),r=e[0],n=e[1];return(0,t.jsx)(h,(0,i.__assign)({cacheKey:v,initialQuery:""},{children:(0,t.jsx)(c.ConfigProvider,(0,i.__assign)({platform:c.Platform.ANDROID,webviewType:c.WebviewType.INTERNAL,scheme:"inherit"},{children:(0,t.jsx)(c.AdaptivityProvider,{children:(0,t.jsxs)(c.AppRoot,(0,i.__assign)({mode:"partial",noLegacyClasses:!0},{children:[(0,t.jsx)(l,{cacheKey:v},void 0),(0,t.jsx)("div",(0,i.__assign)({className:"vkui__root"},{children:(0,t.jsx)("div",(0,i.__assign)({className:"HeaderSearchContainer--right"},{children:(0,t.jsx)(a.HeaderSearch,(0,i.__assign)({onOpen:function(){r||(0,d.trackEvent)("global_search_open","",window.cur.gsearch_hash),n(!0)}},{children:(0,t.jsx)(a.ResultsList,{getMoreResultsButton:function(e,r){return 0===r?null:(0,t.jsx)(c.Button,(0,i.__assign)({href:"/search?q="+e,size:"m",mode:"secondary",stretched:!0},{children:(0,o.getLang)("mobile_search_show_results")}),void 0)}},void 0)}),void 0)}),void 0)}),void 0)]}),void 0)},void 0)}),void 0)}),void 0)},g=n(93176),m=n(73129),y="ExploreSearchQuery";function p(){return(0,t.jsxs)(h,(0,i.__assign)({cacheKey:y},{children:[(0,t.jsx)(l,{cacheKey:y},void 0),(0,t.jsx)(c.ConfigProvider,(0,i.__assign)({platform:c.Platform.ANDROID,webviewType:c.WebviewType.INTERNAL,scheme:"inherit"},{children:(0,t.jsx)(c.AdaptivityProvider,{children:(0,t.jsx)(c.AppRoot,(0,i.__assign)({mode:"partial",noLegacyClasses:!0},{children:(0,t.jsx)("div",(0,i.__assign)({className:"vkui__root"},{children:(0,t.jsx)(c.PanelHeader,(0,i.__assign)({fixed:!1,separator:!1,right:(0,t.jsx)(c.IconButton,(0,i.__assign)({href:"/friends?act=import"},{children:(0,t.jsx)(m.default,{},void 0)}),void 0)},{children:(0,t.jsx)(x,{},void 0)}),void 0)}),void 0)}),void 0)},void 0)}),void 0)]}),void 0)}function x(){var e=(0,s.useContext)(a.SearchContext),r=document.querySelector("#mm_search_items"),n=(0,i.__read)((0,s.useState)(!1),2),u=n[0],l=n[1],_=r&&g.createPortal((0,t.jsx)(a.ResultsList,{getMoreResultsButton:function(e,r){return 0===r?null:(0,t.jsx)(c.Button,(0,i.__assign)({href:"/search?q="+e,size:"m",mode:"secondary",stretched:!0},{children:(0,o.getLang)("mobile_search_show_results")}),void 0)}},void 0),r);return(0,s.useEffect)((function(){if(r)return r.classList.add("m_search_items--vkui"),r.classList.add("vkui__root"),function(){null==r||r.classList.remove("m_search_items--vkui"),r.classList.remove("vkui__root")}}),[]),(0,s.useEffect)((function(){var r;e&&(e.query&&!u&&((0,d.trackEvent)("global_search_open","",window.cur.gsearch_hash),l(!0)),null===(r=document.querySelector("#m"))||void 0===r||r.classList.toggle("qs_opened",!!e.query))}),[null==e?void 0:e.query]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.HeaderSearch,{},void 0),_]},void 0)}var j=n(71437),w=n(47023),L=n(53602),k=n(34757);window.onDOMReady((function(){(0,k.addStatic)(["vkui.css"]).then((function(){(0,L.onLayoutChange)((function(e){e===L.LAYOUT.DESKTOP&&A()})),(0,L.getCurrentLayout)()===L.LAYOUT.DESKTOP&&A()}))}));var S=[];function A(){var e=(0,j.$)(".head_search");e&&(e.classList.add("head_search--vkui"),g.render((0,s.createElement)(f),e))}w.default.getRouter().addRoute("/feed?section=recommended",(function(){var e=document.querySelector("#header__title .RecommendHeader"),r=document.querySelector("#mhead");if(!e||!r)return void window.clog("Can't init VKUI search");e.classList.add("RecommendHeader--vkui"),r.classList.add("basis__header--vkui"),S.push(e),g.render((0,s.createElement)(p),e)}),(function(){S.forEach((function(e){return g.unmountComponentAtNode(e)})),S=[]}))}},function(e){"use strict";e.O(0,[1777,1238,4578,4736,5456,5790,3898,5411,6855,6199,490,410,6444,8592,7219,6429],(function(){return r=29198,e(e.s=r);var r}));e.O()}]);